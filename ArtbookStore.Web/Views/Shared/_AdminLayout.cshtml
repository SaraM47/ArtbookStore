<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Admin - @ViewData["Title"]</title>

    <link rel="stylesheet" href="~/css/site.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>

<!-- Admin layout with sidebar navigation -->
<body class="admin-body">

@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
}

<!-- Wrapper for the entire admin area -->
<div class="admin-wrapper">

    <!-- Sidebar -->
    <aside class="admin-sidebar">

        <div class="admin-logo">
            <img src="~/images/logo.svg" alt="Logo" />
        </div>

        <nav class="admin-nav">

            <!-- Dashboard -->
            <a asp-controller="Admin"
               asp-action="Index"
               class="@(currentController == "Admin" ? "active" : "")">
                Dashboard
            </a>

            <!-- Products -->
            <a asp-controller="Products"
               asp-action="AdminIndex"
               class="@(currentController == "Products" && currentAction == "AdminIndex" ? "active" : "")">
                Products
            </a>

            <!-- Categories -->
            <a asp-controller="Categories"
               asp-action="Index"
               class="@(currentController == "Categories" ? "active" : "")">
                Categories
            </a>

            <!-- Orders -->
            <a asp-controller="Orders"
               asp-action="Index"
               class="@(currentController == "Orders" && currentAction == "Index" ? "active" : "")">
                Orders
            </a>

            <!-- Archived orders -->
            <a asp-controller="Orders"
               asp-action="Archived"
               class="@(currentController == "Orders" && currentAction == "Archived" ? "active" : "")">
                Archived Orders
            </a>

        </nav>

    </aside>

    <!-- Overly only mobile -->
    <div class="admin-overlay" onclick="closeSidebar()"></div>

    <!-- Main content -->
    <main class="admin-main">

        <div class="admin-topbar">

            <!-- Hamburgar menu (Mobile) -->
            <button class="admin-hamburger" onclick="toggleSidebar()">
                <i class="bi bi-list"></i>
            </button>

            <span>Logged as @User.Identity?.Name</span>

            <form asp-area="Identity"
                  asp-page="/Account/Logout"
                  method="post">
                <button type="submit" class="admin-logout">
                    Log out
                </button>
            </form>

        </div>

        <!-- Display success and error messages -->
        @if (TempData["Success"] != null)
        {
            <div class="admin-alert success">
                @TempData["Success"]
            </div>
        }

        @if (TempData["Error"] != null)
        {
            <div class="admin-alert error">
                @TempData["Error"]
            </div>
        }
        @RenderBody()

    </main>

</div>

<script>
// Function to toggle the sidebar on mobile
function toggleSidebar() {
    document.body.classList.toggle("admin-menu-open");
}

// Function to close the sidebar when clicking outside of it
function closeSidebar() {
    document.body.classList.remove("admin-menu-open");
}
</script>

<!-- Chart.js CDN for admin dashboard charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

@RenderSection("Scripts", required: false)

</body>
</html>